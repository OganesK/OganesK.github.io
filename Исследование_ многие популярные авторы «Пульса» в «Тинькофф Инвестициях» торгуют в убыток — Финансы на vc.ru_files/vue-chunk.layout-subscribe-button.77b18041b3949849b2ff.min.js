(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{201:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"container",class:["v-subscribe-button","v-subscribe-button--"+("full"===t.type&&t.isShowSubscribedButtonLabels?"full":"short"),"v-subscribe-button--"+t.buttonType,{"v-subscribe-button--with-notifications":t.isShowNotificationsButton,"v-subscribe-button--state-active":t.isSubscribedActually,"v-subscribe-button--state-inactive":!t.isSubscribedActually,"v-subscribe-button--notifications-enabled":t.isEnabledNotificationsActually}],attrs:{"data-subsite-id":t.subsiteId}},[t.isSubscribedActually?t._e():e("layout-button",{staticClass:"v-subscribe-button__subscribe",attrs:{type:t.isShowNotificationsButton?"blue":t.buttonType,size:t.size,"mobile-size":t.mobileSize,icon:t.subscribeButtonIcon,"icon-size":24,"data-button":"subscribe","mobile-layout":t.isShortOnMobile?["icon"]:["icon","label"],"desktop-layout":"full"===t.type?["icon","label"]:["icon"]},on:{click:t.toggleSubscription}},[t._v("\n    Подписаться\n  ")]),t._v(" "),t.isSubscribedActually?e("layout-button",{staticClass:"v-subscribe-button__unsubscribe",attrs:{size:t.size,"mobile-size":t.mobileSize,type:t.buttonType,icon:"ui_close","icon-size":[12,12],"data-button":"subscribe","data-gtm":t.gtm&&t.gtm+" — Unsubscribe — Clicked","mobile-layout":t.isShortOnMobile||!t.isShowSubscribedButtonLabels?["icon"]:["icon","label"],"desktop-layout":"full"===t.type&&t.isShowSubscribedButtonLabels?["icon","label"]:["icon"]},on:{click:t.onUnsubscribeClick}},[t._v("\n    Отписаться\n  ")]):t._e(),t._v(" "),t.isSubscribedActually?e("layout-button",{staticClass:"v-subscribe-button__subscribed",attrs:{size:t.size,"mobile-size":t.mobileSize,type:t.buttonType,icon:"ui_check","mobile-layout":t.isShortOnMobile||!t.isShowSubscribedButtonLabels?["icon"]:["icon","label"],"desktop-layout":"full"===t.type&&t.isShowSubscribedButtonLabels?["icon","label"]:["icon"],"icon-size":[14,11]}},[t._v("\n    Подписан\n  ")]):t._e(),t._v(" "),t.isShowNotificationsButton?e("layout-button",{staticClass:"v-subscribe-button__notifications",attrs:{size:t.size,"mobile-size":t.mobileSize,type:t.buttonType,icon:"bell","icon-size":"16","data-button":"notifications","data-gtm":t.gtm&&t.gtm+" — Notifications — Clicked"},on:{click:t.toggleNotifications}}):t._e()],1)};s._withStripped=!0;var n=e(535),o=e(11),u={name:"layout-subscribe-button",components:{LayoutButton:n.a},props:{buttonType:{type:String,default:"default"},type:{type:String,default:"full"},size:{type:String,default:"default"},mobileSize:{type:String,default:"default"},subsiteId:{type:Number,required:!0},isShowNotificationsButton:{type:Boolean,default:!1},isSubscribed:{type:Boolean,default:!1},isNotificationsEnabled:{type:Boolean,default:!1},isShowSubscribedButtonLabels:{type:Boolean,default:!0},subscribeButtonIcon:{type:String,default:"v_follow"},isShortOnMobile:{type:Boolean,default:!1},gtm:{type:String,default:""},subscribeGtmClicks:{type:Array,default:()=>[]}},data(){return{moduleSubsiteModel:null,isSubscribedActually:this.isSubscribed,isEnabledNotificationsActually:this.isNotificationsEnabled}},computed:{},created(){this.moduleSubsiteModel=Air.import("module.subsite_model")},methods:{onUnsubscribeClick(){this.$emit("unsubscribe-click"),this.toggleSubscription()},toggleSubscription(){this.isSubscribedActually||this.subscribeGtmClicks.forEach(t=>{Object(o.sendDefaultEvent)(t)}),this.isSubscribedActually=!this.isSubscribedActually,this.moduleSubsiteModel.subscribe(this.subsiteId,this.isSubscribedActually,t=>{t||(this.isSubscribedActually=!this.isSubscribedActually)})},toggleNotifications(){this.isEnabledNotificationsActually=!this.isEnabledNotificationsActually,this.moduleSubsiteModel.enableNotifications(this.subsiteId,this.isEnabledNotificationsActually,t=>{if(!t)return void(this.isEnabledNotificationsActually=!this.isEnabledNotificationsActually);const i=this.isEnabledNotificationsActually?"Мы уведомим вас о новых записях":"Вы отписались от уведомлений о новых записях";notify.success(i)})}}},b=(e(589),e(14)),l=Object(b.a)(u,s,[],!1,null,null,null);l.options.__file="src/Components/Ui/vue/layout/chunk.layout-subscribe-button.vue";i.default=l.exports},535:function(t,i,e){"use strict";var s=function(){var t,i=this,e=i.$createElement,s=i._self._c||e;return s(i.url?"a":i.tag,{tag:"component",class:["v-button","v-button--"+i.type,"v-button--size-"+i.size,(t={},t["v-button--mobile-size-"+i.mobileSize]=i.mobileSize,t["v-button--disabled"]=i.disabled,t["ui--bg_loading"]=i.loading,t)],attrs:{href:i.url||!1,target:!(!i.url||!i.newTab)&&"_blank","data-layout-mobile":i.mobileLayout,"data-layout-desktop":i.desktopLayout},on:{click:i.onClick}},[i.icon?s("div",{class:["v-button__icon",{"v-button__icon--new":i.icon.startsWith("v_")}]},[s("icon",{attrs:{name:i.icon,width:i.iconWidth,height:i.iconHeight}})],1):i._e(),i._v(" "),i.$slots.default?s("span",{staticClass:"v-button__label"},[i._t("default")],2):i._e()])};s._withStripped=!0;var n={name:"ui-button",components:{Icon:e(29).a},props:{tag:{type:String,default:"button"},type:{type:String,default:"default",validator:t=>["default","blue","green","red","app","plus","inline"].includes(t)},size:{type:String,default:"default",validator:t=>["large","default","small","tiny"].includes(t)},mobileSize:{type:String,default:""},icon:{type:String,default:""},iconSize:{type:[Number,Array],default:12},url:{type:String,default:""},newTab:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},mobileLayout:{type:Array,default:()=>["icon","label"]},desktopLayout:{type:Array,default:()=>["icon","label"]}},computed:{iconWidth(){return Array.isArray(this.iconSize)?this.iconSize[0]:this.iconSize},iconHeight(){return Array.isArray(this.iconSize)?this.iconSize[1]:this.iconSize}},methods:{onClick(t){this.disabled||("button"!==this.tag||this.url||t.preventDefault(),this.$emit("click",t))}}},o=(e(539),e(14)),u=Object(o.a)(n,s,[],!1,null,null,null);u.options.__file="src/Components/Ui/vue/layout/layout-button.vue";i.a=u.exports},537:function(t,i,e){var s=e(540);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,e(28).default)("31e8189c",s,!1,{})},539:function(t,i,e){"use strict";e(537)},540:function(t,i,e){(i=e(27)(!1)).push([t.i,"/**\n * @see src/Components/Ui/styles/buttons.styl\n */\n",""]),t.exports=i},559:function(t,i,e){var s=e(590);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,e(28).default)("1d24bbf2",s,!1,{})},589:function(t,i,e){"use strict";e(559)},590:function(t,i,e){(i=e(27)(!1)).push([t.i,":root {\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(50px + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n.v-subscribe-button {\n  display: grid;\n  grid-template-columns: auto;\n  grid-template-rows: auto;\n}\n.v-subscribe-button--with-notifications {\n  grid-gap: 8px;\n}\n.v-subscribe-button--full {\n  grid-template-columns: minmax(0, 1fr) auto;\n}\n.v-subscribe-button--full .v-button {\n  min-width: 0;\n}\n.v-subscribe-button__subscribe {\n  grid-column: 1/3;\n/**\n     * Decreased from 2 to 1 due to WD-7285\n     */\n  z-index: 1;\n}\n.v-subscribe-button__subscribed,\n.v-subscribe-button__unsubscribe {\n  grid-column: 1/2;\n}\n.v-subscribe-button__notifications {\n  grid-column: 2;\n}\n.v-subscribe-button__unsubscribe {\n  z-index: 1;\n  opacity: 0;\n}\n@media (hover: hover) {\n.v-subscribe-button__unsubscribe:hover {\n    opacity: 1;\n}\n.v-subscribe-button__unsubscribe:hover ~ .v-subscribe-button__subscribed {\n    opacity: 0;\n}\n}\n.v-subscribe-button .v-button {\n  --actions-gap: 0 !important;\n  grid-row: 1;\n}\n.v-subscribe-button .v-button--size-small {\n  --height: 34px;\n}\n.v-subscribe-button--state-active .v-subscribe-button__subscribe {\n  visibility: hidden;\n}\n.v-subscribe-button--state-inactive .v-subscribe-button__subscribed,\n.v-subscribe-button--state-inactive .v-subscribe-button__unsubscribe,\n.v-subscribe-button--state-inactive .v-subscribe-button__notifications {\n  visibility: hidden;\n}\n.v-subscribe-button--notifications-enabled .icon--bell {\n  color: #4683d9;\n  -webkit-transform: translateX(2px) rotate(15deg);\n  transform: translateX(2px) rotate(15deg);\n}\n.v-subscribe-button.v-subscribe-button--default .icon--ui_check {\n  color: #2ea83a;\n}\n.v-subscribe-button.v-subscribe-button--default .icon--ui_close {\n  color: #e52e3a;\n}\n.v-subscribe-button:not(.v-subscribe-button--with-notifications) .v-subscribe-button__subscribed,\n.v-subscribe-button:not(.v-subscribe-button--with-notifications) .v-subscribe-button__unsubscribe {\n  grid-column: 1/3;\n}\n",""]),t.exports=i}}]);